<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/match.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_check.js~CheckAnonymousRequest.html">CheckAnonymousRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_check.js~CheckEmailRequest.html">CheckEmailRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_check.js~CheckFacebookRequest.html">CheckFacebookRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_check.js~CheckGoogleRequest.html">CheckGoogleRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_check.js~CheckRequest.html">CheckRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_check.js~CheckTangoRequest.html">CheckTangoRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_link.js~LinkAnonymousRequest.html">LinkAnonymousRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_link.js~LinkFacebookRequest.html">LinkFacebookRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_link.js~LinkGoogleRequest.html">LinkGoogleRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_link.js~LinkRequest.html">LinkRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_link.js~LinkTangoRequest.html">LinkTangoRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_login.js~CreateEmailRequest.html">CreateEmailRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_login.js~EmailPasswordResetRequest.html">EmailPasswordResetRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_login.js~LoginAnonymousRequest.html">LoginAnonymousRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_login.js~LoginEmailRequest.html">LoginEmailRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_login.js~LoginFacebookRequest.html">LoginFacebookRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_login.js~LoginGoogleRequest.html">LoginGoogleRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_login.js~LoginRequest.html">LoginRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_login.js~LoginTangoRequest.html">LoginTangoRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_unlink.js~UnlinkAnonymousRequest.html">UnlinkAnonymousRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_unlink.js~UnlinkEmailRequest.html">UnlinkEmailRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_unlink.js~UnlinkFacebookRequest.html">UnlinkFacebookRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_unlink.js~UnlinkGoogleRequest.html">UnlinkGoogleRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_unlink.js~UnlinkRequest.html">UnlinkRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/account_unlink.js~UnlinkTangoRequest.html">UnlinkTangoRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/achievement.js~AchievementListRequest.html">AchievementListRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/achievement.js~AchievementUpdateRequest.html">AchievementUpdateRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client.js~Client.html">Client</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client.js~Response.html">Response</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/datastore.js~DatastoreDeleteRequest.html">DatastoreDeleteRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/datastore.js~DatastoreGetRequest.html">DatastoreGetRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/datastore.js~DatastorePutRequest.html">DatastorePutRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/datastore.js~DatastoreSearchRequest.html">DatastoreSearchRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/datastore.js~DatastoreUpdateRequest.html">DatastoreUpdateRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/game.js~GameGetRequest.html">GameGetRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/gamer.js~GamerGetRequest.html">GamerGetRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/gamer.js~GamerUpdateRequest.html">GamerUpdateRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/leaderboard.js~LeaderboardAndRankGetRequest.html">LeaderboardAndRankGetRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/leaderboard.js~LeaderboardGetRequest.html">LeaderboardGetRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/leaderboard.js~LeaderboardListRequest.html">LeaderboardListRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/leaderboard.js~LeaderboardUpdateRequest.html">LeaderboardUpdateRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/match.js~MatchCreateRequest.html">MatchCreateRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/match.js~MatchGetRequest.html">MatchGetRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/match.js~MatchListRequest.html">MatchListRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/match.js~MatchMakeRequest.html">MatchMakeRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/match.js~MatchTurnEndRequest.html">MatchTurnEndRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/match.js~MatchTurnGetRequest.html">MatchTurnGetRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/match.js~MatchTurnLeaveRequest.html">MatchTurnLeaveRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/match.js~MatchTurnSubmitRequest.html">MatchTurnSubmitRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/match.js~MatchesSinceRequest.html">MatchesSinceRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/message.js~MessageDeleteRequest.html">MessageDeleteRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/message.js~MessageListRequest.html">MessageListRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/message.js~MessageReadRequest.html">MessageReadRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ping.js~PingRequest.html">PingRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/request.js~AccountsRequest.html">AccountsRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/request.js~ApiRequest.html">ApiRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/request.js~Request.html">Request</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/script.js~ExecuteScriptRequest.html">ExecuteScriptRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/server.js~ServerRequest.html">ServerRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/session.js~Session.html">Session</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/shared_storage.js~SharedStorageGetRequest.html">SharedStorageGetRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/shared_storage.js~SharedStoragePublicDeleteRequest.html">SharedStoragePublicDeleteRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/shared_storage.js~SharedStoragePublicPatchRequest.html">SharedStoragePublicPatchRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/shared_storage.js~SharedStoragePublicPutRequest.html">SharedStoragePublicPutRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/shared_storage.js~SharedStorageSearchRequest.html">SharedStorageSearchRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/storage.js~StorageDeleteRequest.html">StorageDeleteRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/storage.js~StorageGetRequest.html">StorageGetRequest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/storage.js~StoragePutRequest.html">StoragePutRequest</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/match.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/*
 * Copyright 2016 Heroic Labs
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import {ApiRequest} from &apos;./request&apos;;

/**
 * List all matches the current gamer is part of.
 */
export class MatchListRequest extends ApiRequest {

  /**
   * @param  {Session} session Session identifying the account making this request.
   * @return {MatchListRequest} An instance of this object.
   */
  constructor(session) {
    super(&apos;GET&apos;, &apos;/v0/gamer/match&apos;, session);
  }
}

/**
 * Get a list of all matches with turn data newer than a given UTC timestamp.
 * Only retrieve matches with turns newer than this UTC timestamp in milliseconds.
 * Includes match metadata and the turns newer than the given time.
 */
export class MatchesSinceRequest extends ApiRequest {

  /**
   * @param  {Session} session Session identifying the account making this request.
   * @param  {Integer} timestamp The UTC timestamp in milliseconds to use as a lower time threshold.
   * @return {MatchesSinceRequest} An instance of this object.
   */
  constructor(session, timestamp) {
    var queryParam = {&apos;since&apos;: timestamp};
    super(&apos;GET&apos;, &apos;/v0/gamer/matches/&apos;, session, null, queryParam);
  }
}

/**
 * Get metadata about a specific match.
 */
export class MatchGetRequest extends ApiRequest {

  /**
   * @param  {Session} session Session identifying the account making this request.
   * @param  {String} matchId The match ID to retrieve.
   * @return {MatchGetRequest} An instance of this object.
   */
  constructor(session, matchId) {
    super(&apos;GET&apos;, &apos;/v0/gamer/match/&apos; + matchId, session);
  }
}

/**
 * Get some or all of the turns for a given match.
 */
export class MatchTurnGetRequest extends ApiRequest {

  /**
   * @param  {Session} session Session identifying the account making this request.
   * @param  {String} matchId The match ID to retrieve.
   * @param  {Integer} sinceTurnNumber Retrieve all turns newer than this turn number.
   * @return {MatchTurnGetRequest} An instance of this object.
   */
  constructor(session, matchId, sinceTurnNumber) {
    super(&apos;GET&apos;, &apos;/v0/gamer/match/&apos; + matchId + &apos;/turn/&apos; + sinceTurnNumber, session);
  }
}

/**
 * Submit a new turn to the specified match.
 */
export class MatchTurnSubmitRequest extends ApiRequest {

  /**
   * @param  {Session} session Session identifying the account making this request.
   * @param  {String} matchId The match ID to submit.
   * @param  {Integer} lastSeenTurnNumber The last turn number seen by this client for the match.
   * @param  {String} nextGamerId The gamer ID of the gamer who must submit a turn next.
   * @param  {Object} turnData The turn data itself.
   * @return {MatchTurnSubmitRequest} An instance of this object.
   */
  constructor(session, matchId, lastSeenTurnNumber, nextGamerId, turnData) {
    var body = {
      &apos;last_turn&apos;: lastSeenTurnNumber,
      &apos;next_gamer_id&apos;: nextGamerId,
      &apos;data&apos;: turnData
    };
    super(&apos;POST&apos;, &apos;/v0/gamer/match/&apos; + matchId + &apos;/turn&apos;, session, body);
  }
}

/**
 * End a match.
 */
export class MatchTurnEndRequest extends ApiRequest {

  /**
   * @param  {Session} session Session identifying the account making this request.
   * @param  {String} matchId The match ID to end.
   * @return {MatchTurnEndRequest} An instance of this object.
   */
  constructor(session, matchId) {
    var body = {&apos;action&apos;: &apos;end&apos;};
    super(&apos;POST&apos;, &apos;/v0/gamer/match/&apos; + matchId, session, body);
  }
}

/**
 * Leave a match.
 */
export class MatchTurnLeaveRequest extends ApiRequest {

  /**
   * @param  {Session} session Session identifying the account making this request.
   * @param  {String} matchId The match ID to leave.
   * @return {MatchTurnLeaveRequest} An instance of this object.
   */
  constructor(session, matchId) {
    var body = {&apos;action&apos;: &apos;end&apos;};
    super(&apos;POST&apos;, &apos;/v0/gamer/match/&apos; + matchId, session, body);
  }
}

/**
 * Explicitly create a new match, skipping the matchmaking service.
 */
export class MatchCreateRequest extends ApiRequest {

  /**
   * @param  {Session} session Session identifying the account making this request.
   * @param  {String[]} gamerIds The array of gamer IDs to add to the match, NOT including the current gamer ID.
   * @return {MatchCreateRequest} An instance of this object.
   */
  constructor(session, gamerIds) {
    var body = {&apos;gamers&apos;: gamerIds, &apos;filters&apos;: []};
    super(&apos;PUT&apos;, &apos;/v0/gamer/match&apos;, session, body);
  }

  /**
   * Add a new gamer ID as a participant for the match being created.
   * @param  {String} gamer Gamer ID to add to the match.
   * @return {MatchCreateRequest} Current instance of this object, can be used to chain function calls.
   */
  addGamer(gamer) {
    this._body.gamers.push(gamer);
    return this;
  }

  /**
   * Add filter to use to narrow down the pool of potential opponents.
   * @param  {String} filter Filter string to add to the list of filters.
   * @return {MatchCreateRequest} Current instance of this object, can be used to chain function calls.
   */
  addFilter(filter) {
    this._body.filters.push(filter);
    return this;
  }
}

/**
 * Request a new match through the matchmaking service.
 */
export class MatchMakeRequest extends ApiRequest {

  /**
   * @param  {Session} session Session identifying the account making this request.
   * @param  {Integer} players Total number of players required in the match.
   * @return {MatchMakeRequest} An instance of this object.
   */
  constructor(session, players) {
    var body = {&apos;players&apos;: players, &apos;filters&apos;: []};
    super(&apos;POST&apos;, &apos;/v0/gamer/match&apos;, session, body);
  }

  /**
   * Add filter to use to narrow down the pool of potential opponents.
   * @param  {String} filter Filter string to add to the list of filters.
   * @return {MatchCreateRequest} Current instance of this object, can be used to chain function calls.
   */
  addFilter(filter) {
    this._body.filters.push(filter);
    return this;
  }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.5)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
